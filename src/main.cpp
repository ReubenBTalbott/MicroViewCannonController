#include <Arduino.h>
#include <MicroView.h>
int devmode = 0;
int booting = 0;
int bootscreen = 0;
int code = 0;
int confirmButton = 0;
int confirmState = 0;

uint8_t switches[] = {
0x00, 0x00, 0x00, 0x00, 0x00, 0xE0, 0xE0, 0xE0, 0xE0, 0xE0, 0xE0, 0xE0, 0xE0, 0xE0, 0xE0, 0xE0,
0xE0, 0xE0, 0xE0, 0xE0, 0xE0, 0xE0, 0xE0, 0xE0, 0xE0, 0xE0, 0xE0, 0xE0, 0xE0, 0xE0, 0xE0, 0xE0,
0xE0, 0xE0, 0xE0, 0xE0, 0xE0, 0xE0, 0xE0, 0xE0, 0xE0, 0xE0, 0xE0, 0xE0, 0xE0, 0xE0, 0xE0, 0xE0,
0xE0, 0xE0, 0xE0, 0xE0, 0xE0, 0xE0, 0xE0, 0xE0, 0xE0, 0xE0, 0xE0, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0xFF, 0xFF, 0xFF, 0xFF, 0x01, 0x00, 0x00, 0x01, 0xFF, 0xFF, 0x01,
0x00, 0x00, 0x01, 0xFF, 0xFF, 0x01, 0x00, 0x00, 0x01, 0xFF, 0xFF, 0x01, 0x00, 0x00, 0x01, 0xFF,
0xFF, 0x01, 0x00, 0x00, 0x01, 0xFF, 0xFF, 0x01, 0x00, 0x00, 0x01, 0xFF, 0xFF, 0x01, 0x00, 0x00,
0x01, 0xFE, 0xFF, 0x01, 0x00, 0x00, 0x01, 0xFF, 0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0xFF, 0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0xFF, 0xFF, 0x00,
0x00, 0x00, 0x00, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0xFF,
0xFF, 0x00, 0x00, 0x00, 0x00, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0xFF, 0xFF, 0x00, 0x00, 0x00,
0x00, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0xFF, 0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0xFF, 0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0xFF, 0xFF, 0x00,
0x00, 0x00, 0x00, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0xFF,
0xFF, 0x00, 0x00, 0x00, 0x00, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0xFF, 0xFF, 0x00, 0x00, 0x00,
0x00, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0xFF, 0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x3F, 0x3F, 0x3F, 0x3F, 0x3E, 0x3C, 0x3C, 0x3E, 0x3F, 0x3F, 0x3E,
0x3C, 0x3C, 0x3E, 0x3F, 0x3F, 0x3E, 0x3C, 0x3C, 0x3E, 0x3F, 0x3F, 0x3E, 0x3C, 0x3C, 0x3E, 0x3D,
0x3F, 0x3E, 0x3C, 0x3C, 0x3E, 0x3F, 0x3F, 0x3E, 0x3C, 0x3C, 0x3E, 0x3F, 0x3F, 0x3E, 0x3C, 0x3C,
0x3E, 0x3F, 0x3F, 0x3E, 0x3C, 0x3C, 0x3E, 0x3F, 0x3F, 0x3F, 0x3F, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
};

void setup()
{
  // put your setup code here, to run once:
  pinMode(confirmButton, INPUT);
  digitalWrite(confirmButton, HIGH);

  if (devmode == 1)
  {
    booting = 1;
  }

  if (booting == 0)
  {
    uView.begin();
    uView.clear(PAGE);
    uView.setFontType(1);

    for (int x = 0; x < 3; x++)
    {
      uView.clear(PAGE);
      uView.setCursor(0, 0);
      uView.print("Booting");
      uView.display();
      delay(500);

      uView.clear(PAGE);
      uView.setCursor(0, 0);
      uView.print("Booting.");
      uView.display();
      delay(500);

      uView.clear(PAGE);
      uView.setCursor(0, 0);
      uView.print("Booting..");
      uView.display();
      delay(500);

      uView.clear(PAGE);
      uView.setCursor(0, 0);
      uView.print("Booting...");
      uView.display();
      delay(500);
    }
  }
}

void loop()
{
  // put your main code here, to run repeatedly:
  while (bootscreen == 0)
  {
    if (devmode == 1){
      bootscreen = 1;
    }

    confirmState = digitalRead(confirmButton);
    uView.clear(PAGE);
    uView.setCursor(0, 0);
    uView.print("Please");
    uView.setCursor(0, 14);
    uView.print("Press");
    uView.setCursor(0, 28);
    uView.print("Confirm");
    uView.display();
    if (confirmState == LOW)
    {
      bootscreen = 1;
    }
  }
  uView.clear(PAGE);
  uView.setCursor(0, 0);
  uView.drawBitmap(switches);
  uView.display();
}